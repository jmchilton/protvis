<tal:var define="global spec python: urlencode(spectrum)"></tal:var>
<tal:if condition="python: offset == None or int(offset) < 0 or datafile == None">
	<script>
		DetailsDialog.attr("title", "Spectrum Not Found");
		DetailsDialog.attr("content", "The requeted spectrum could not be found.<br/>It is possible that the names got mangled by the tools generating the data");
		DetailsDialog.attr("style", "width: 400px;");
		DetailsDialog.show();
	</script>
</tal:if>
<tal:else condition="python: offset != None and int(offset) >= 0 and datafile != None">
	<iframe src="/lorikeet?file=${file}&n=${datafile}&type=${type}&spectrum=${spec}&off=${offset}${params}" style="width:100%; height:1000px; border:0px;"></iframe>
	<script>SwitchDataset(${datafile}, "data_spectrum");</script>
</tal:else>
